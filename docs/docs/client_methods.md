کلاس **`rubpy.Client`** یک کلاینت سطح بالا و ناهمزمان یا به اصطلاح async برای تعامل با API روبیکا است. این مستند تمام متدها، پارامترها، مقدار بازگشتی، رفتار داخلی، نکات عملی و مثال‌ها را پوشش می‌دهد.

## ساخت نمونه
این کلاس شامل پارامترهایی برای تنظیم برخی تنظیمات است.
```py
from rubpy import Client

app = Client("your-session-name")
```

### پارامترها
- `name`: نام یا مسیر فایل سشن (str) یا نمونه StringSession.
- `auth`: کلید احراز هویت (اختیاری).
- `private_key`: کلید خصوصی RSA (اختیاری، رشته یا بایت).
- `phone_number`: شماره تلفن (اختیاری).
- `user_agent`: رشته User-Agent (اختیاری، پیش‌فرض مرورگر کروم).
- `timeout`: زمان انتظار درخواست‌ها (ثانیه، پیش‌فرض 20).
- `lang_code`: کد زبان (پیش‌فرض 'fa').
- `parse_mode`: حالت تجزیه پیام (html، markdown، mk یا None).
- `proxy`: آدرس پروکسی (مثال: 'http://127.0.0.1:80').
- `logger`: شیء Logger برای لاگ‌گیری (اختیاری).
- `display_welcome`: نمایش پیام خوش‌آمدگویی (پیش‌فرض False).
- `platform`: پلتفرم کلاینت ('PWA' یا 'Android').

### خطاها
- `ValueError`: در صورت نامعتبر بودن ورودی‌ها.
- `TypeError`: در صورت نادرست بودن نوع name.

---

## چرخهٔ حیات

### شروع بات
متد: `start`

| پارامتر | نوع | توضیحات                                                                                 |
| ------- | --: | --------------------------------------------------------------------------------------- |
| —       |   — | شروع و آماده سازی `rubpy.start` برای ارتباط با API روبیکا |

**شرح کوتاه:** آماده‌سازی سشن HTTP برای ارسال درخواست‌ها.

**بازگشت:** `None` (async)

---

### غیرفعال کردن بات
متد: `disconnect`

| پارامتر | نوع | توضیحات                                                                     |
| ------- | --: | --------------------------------------------------------------------------- |
| —       |   — | آماده سازی برای متوقف کردن |

**شرح کوتاه:** متوقف کردن client و بستن منابع.

**بازگشت:** `None` (async)

---

### اجرای بات
متد: `run`

| پارامتر       |             نوع | توضیحات                                 |
| ------------- | --------------: | --------------------------------------- |
| `coroutine` | `Optional[Coroutine]` | ورودی یک تابع `async` برای اجرای اولیه      |
| `phone_number`        | `Optional[str]` | تنظیم شماره تلفن برای ورود به حساب کاربری       |

**شرح کوتاه:** راه اندازی اجرای اولیه، اتصال به وبسوکت و ورود به حساب کاربری.

**بازگشت:** `None` (async)

**نکته:** `run` خودش `start()` را فراخوانی می‌کند.

---

## اطلاعات پایه‌ای

### دریافت اطلاعات
متد: `get_me`

**شرح کوتاه:** دریافت اطلاعات حساب کاربری.

**بازگشت:** `Dict` (async)

**مثال:**

```py
me = await client.get_me()
```

---

## ارسال پیام‌ها و محتوا

### ارسال پیام
متد: `send_message`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `text`                 |     `Optional[str]` | متن پیام               |
| `reply_to_message_id`    |   `Optional[str]` | ورودی شناسه پیام برای پاسخ               |
| `file_inline`        |   `Optional[str, bytes, Dict]` | ورودی فایل، به صورت بایت یا مسیر فایل          |
| `sticker` |               `Optional[Dict]`  | ورودی اطلاعات استیکر برای ارسال استیکر  |
| `type`  |      `Optional[str]` | ورودی نوع فایل برای ارسال ["File", "Music", "Voice", "Gif", "Photo", "File"] |
| `is_spoil`     | `Optional[bool]` | آیا پیام اسپویل شود؟           |
| `thumb`          |   `Optional[bool]` | آیا تامبنیل فایل به صورت خودکار استخراج شود؟               |
| `audio_info`        |   `Optional[bool]` | آیا اطلاعات موسیقی یا Voice به صورت خودکار استخراج شود؟          |
| `auto_delete` |      `Optional[float]` | ورودی عدد صحیح برای حذف خودکار پیام بر حسب ثانیه(پیشفرض False)  |
| `parse_mode`  |      `Optional[str]` | تنظیم نوع پارس کردن پیام (مثلا `markdown`) |

**شرح کوتاه:** متد اصلی ارسال انواع پیام.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_message("me", "سلام!")
```

---

### ارسال داکیومنت
متد: `send_document`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `document`                 |     `[Path, bytes]` | مسیر فایل یا بایت فایل             |
| `caption`    |   `Optional[str]` | کپشن فایل              |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال فایل.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_document("me", "file.zip", "my zip file")
```

--- 


### ارسال عکس
متد: `send_photo`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `photo`                 |     `[Path, bytes]` | مسیر فایل یا بایت فایل             |
| `caption`    |   `Optional[str]` | کپشن فایل              |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال تصویر.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_document("me", "image.jpg", "my image file")
```

--- 


### ارسال گیف
متد: `send_gif`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `gif`                 |     `[Path, bytes]` | مسیر فایل یا بایت فایل             |
| `caption`    |   `Optional[str]` | کپشن فایل              |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال گیف.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_gif("me", "my.gif", "my gif file")
```

--- 


### ارسال موسیقی
متد: `send_music`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `music`                 |     `[Path, bytes]` | مسیر فایل یا بایت فایل             |
| `caption`    |   `Optional[str]` | کپشن فایل              |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال موسیقی.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_music("me", "music.mp3", "my mp3 file")
```

---


### ارسال استیکر
متد: `send_sticker`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `sticker`                 |     `Dict` | اطلاعات استیکر          |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال استیکر.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_sticker("me", {})
```

--- 


### ارسال ویدیو
متد: `send_video`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `video`                 |     `[Path, bytes]` | مسیر فایل یا بایت فایل             |
| `caption`    |   `Optional[str]` | کپشن فایل              |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال ویدیو.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_video("me", "video.mp4", "my video file")
```

--- 


### ارسال ویدیو میسیج
متد: `send_video_message`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `video_message`                 |     `[Path, bytes]` | مسیر فایل یا بایت فایل             |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال ویدیو میسیج.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_video_message("me", "video.mp4")
```


--- 


### ارسال صدا
متد: `send_voice`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `voice`                 |     `[Path, bytes]` | مسیر فایل یا بایت فایل             |
| `...`        |   ... | باقی پارامترها شبیه `send_message` هستند        |

**شرح کوتاه:** متد ارسال صدا.

**بازگشت:** `Dict` (async)

**مثال:**

```py
msg = await client.send_voice("me", "voice.ogg")
```

--- 

## متدهای پیام ها

### دریافت ری اکشن های پیام
متد: `get_message_reactions`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسهٔ مقصد            |
| `message_id`                 |     `str` | شناسه پیام        |
| `start_id`                 |     `Optional[str]` | شناسه اختصاصی برای ادامه دریافت ری اکشن ها     |

**شرح کوتاه:** دریافت لیست ری اکشن های پیام.

**بازگشت:** `Dict` (async)

**مثال:**

```py
reactions = await client.get_message_reactions("object_guid", "message_id")
# OR
reactions = await client.get_message_reactions("object_guid", "message_id", start_id="your-next-start-id")
```

**نکته:** پارامتر `start_id` به صورت پیشفرض برابر `None` است. این پارامتر برای دریافت ادامه ری اکشن ها نیاز است. یک `next_start_id` در خروجی داده میشود که برای همین مورد نیز نیاز است. همچنین یک `has_continue` خروجی داده میشود که یک متغیر `bool` است.

--- 

### گرفتن وضعیت نظرسنجی
متد: `get_poll_status`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `poll_id`              |     `str` | شناسه نظرسنجی         |

**شرح کوتاه:** دریافت وضعیت نظرسنجی.

**بازگشت:** `Dict` (async)


--- 

### ری اکشن به پیام
متد: `action_on_message_reaction`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه گفتگو         |
| `message_id`              |     `str` | شناسه پیام         |
| `reaction_id`              |     `str` | آیدی ری اکشن       |
| `action`              |     `Literal['Add', 'Remove']` | نوع اکشن (پیشفرض: False)      |

**شرح کوتاه:** ری اکشن دادن به یک پیام در یک گفتگو.

**بازگشت:** `Dict` (async)


--- 

### ایجاد نظرسنجی
متد: `create_poll`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه مقصد         |
| `question`              |     `str` | سوال       |
| `options`              |     `list` | لیست سوالات   |
| `type`              |     `["Quiz", "Regular"]` | نوع نظرسنجی    |
| `is_anonymous`              |    `Optional[bool]` | آیا نظرسنجی ناشناس باشد؟    |
| `allows_multiple_answers`              |     `Optional[bool]` | آیا نظرسنجی چند گزینه ای باشد؟    |
| `correct_option_index`              |     `Optional[int]` | عدد ایندکس پاسخ درست    |
| `explanation`              |     `Optional[str]` | توضیحی برای پاسخ صحیح در نظرسنجی‌های از نوع کوییز.    |
| `reply_to_message_id`              |     `Optional[str]` | شناسه پیام برای پاسخ    |

**شرح کوتاه:** متد ارسال انواع نظرسنجی.

**بازگشت:** `Dict` (async)


--- 

### حذف پیام
متد: `delete_messages`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه گفتگو         |
| `message_ids`              |     `list` | لیست شناسه پیام ها  |
| `type`              |    Union[`"Global"`, `"Local"`] | نوع حذف پیام   |

**شرح کوتاه:** حذف تکی یا لیستی از پیام ها در یک گفتگو.

**بازگشت:** `Dict` (async)


--- 

### ویرایش پیام
متد: `edit_message`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه گفتگو         |
| `message_id`              |     `str` | شناسه پیام |
| `text`              |    `str` | متن جدید پیام  |
| `parse_mode`              |  `Optional[str]`   | نوع پارس کردن پیام |

**شرح کوتاه:** ویرایش متن یک پیام.

**بازگشت:** `Dict` (async)

--- 

### فوروارد پیام
متد: `forward_messages`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `from_object_guid`              |     `str` | از گفتگو     |
| `to_object_guid`              |     `str` | به گفتگو |
| `message_ids`              |    `list` | لیست پیام ها |

**شرح کوتاه:** فوروارد پیام ها.

**بازگشت:** `Dict` (async)

--- 

### آدرس اشتراک گذاری پیام
متد: `get_message_url`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه کانال    |
| `message_id`              |     `str` | شناسه پیام|

**شرح کوتاه:** دریافت آدرس اشتراک گذاری عمومی پیام از کانال های عمومی.

**بازگشت:** `Dict` (async)


--- 

### گرفتن پیام ها با شناسه
متد: `get_messages_by_id`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه گفتگو    |
| `message_ids`              |     `str` | شناسه پیام ها |

**شرح کوتاه:** دریافت پیام ها با استفاده از شناسه پیام ها.

**بازگشت:** `Dict` (async)


--- 

### دریافت پیام های گفتگو
متد: `get_messages_interval`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه گفتگو    |
| `middle_message_id`              |     `str` | شناسه پیام میانی|

**شرح کوتاه:** دریافت 25 پیام آخر بر اساس آخرین شناسه پیام.

**بازگشت:** `Dict` (async)


--- 

### گرفتن آپدیت های پیام ها
متد: `get_messages_updates`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه گفتگو    |
| `state`              |     `int` | ورودی timestamp       |

**شرح کوتاه:** دریافت آپدیت های پیام های گفتگو.

**بازگشت:** `Dict` (async)

--- 

### گرفتن رای دهندگان نظرسنجی
متد: `get_poll_option_voters`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `poll_id`              |     `str` | شناسه نظرسنجی    |
| `selection_index`              |     `int` | ایندکس انتخاب شده     |
| `start_id`              |     `str` | شناسه شروع     |

**شرح کوتاه:** دریافت لیست رای دهندگان در نظرسنجی.

**بازگشت:** `Dict` (async)

--- 

### گرفتن رای دهندگان نظرسنجی
متد: `get_poll_option_voters`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `poll_id`              |     `str` | شناسه نظرسنجی    |
| `selection_index`              |     `int` | ایندکس انتخاب شده     |
| `start_id`              |     `str` | شناسه شروع     |

**شرح کوتاه:** دریافت لیست رای دهندگان در نظرسنجی.

**بازگشت:** `Dict` (async)

--- 

### سنجاق پیام
متد: `set_pin_message`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `object_guid`              |     `str` | شناسه گفتگو    |
| `message_id`              |     `str` | شناسه پیام    |
| `action`              |     `Literal['Pin', 'Unpin']` | شناسه شروع     |

**شرح کوتاه:** سنجاق کردن پیام یا حذف سنجاق پیام.

**بازگشت:** `Dict` (async)


--- 

### رای دادن نظرسنجی
متد: `vote_poll`

| پارامتر                |                  نوع | توضیحات                |
| ---------------------- | -------------------: | ---------------------- |
| `poll_id`              |     `str` | شناسه گفتگو    |
| `selection_index`              |     `str` | ایندکس انتخاب شده | 

**شرح کوتاه:** رای دادن به نظرسنجی.

**بازگشت:** `Dict` (async)
